---
title: 长短缓存
date: 2023-07-08 16:30:17
tags:
- 高并发
categories:
- 技术经验
---





### 长短缓存

- 定义：长短缓存是分级缓存，长缓存的失效时间大，短缓存的失效时间小。
- 目的：传统的单级缓存在高并发的场景下存在缓存雪崩、缓存击穿等问题，对数据库的压力过大。长短缓存通过不同的失效时间控制了数据库写操作的频率。

### 读写流程

以商品列表缓存为例，长缓存不失效，短缓存失效时间一小时

写流程：

1. 从长缓存获取商品列表缓存
2. 业务逻辑处理，得到新商品列表
3. 回写缓存：先短后长

读流程

1. 从短缓存获取商品列表缓存
2. 获取成功：则直接返回
3. 获取失败：
   1. 异步发送商品列表更新消息（一段时间聚合后，从数据库查询数据回写缓存）
   2. 从兜底的长缓存中获取数据



### 参考资料

- [高并发系统下的缓存解决方案 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/95521894)
